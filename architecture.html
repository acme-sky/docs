<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-architecture/index" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Architettura | ACME Sky</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://acme-sky.github.io/docs/img/docs-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://acme-sky.github.io/docs/img/docs-social-card.jpg"><meta data-rh="true" property="og:url" content="https://acme-sky.github.io/docs/architecture"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Architettura | ACME Sky"><meta data-rh="true" name="description" content="Architecture scheme"><meta data-rh="true" property="og:description" content="Architecture scheme"><link data-rh="true" rel="icon" href="/docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://acme-sky.github.io/docs/architecture"><link data-rh="true" rel="alternate" href="https://acme-sky.github.io/docs/architecture" hreflang="en"><link data-rh="true" rel="alternate" href="https://acme-sky.github.io/docs/architecture" hreflang="x-default"><link rel="stylesheet" href="/docs/assets/css/styles.e85c0f04.css">
<script src="/docs/assets/js/runtime~main.9b375cdd.js" defer="defer"></script>
<script src="/docs/assets/js/main.581b6eda.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><div class="navbar__logo"><img src="/docs/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/docs/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">ACME Sky</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/acme-sky/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Home</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/architecture">Architettura</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/bpmn">Diagramma BPMN</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/choreos_bpmn">Diagrammi coreografie</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/choreos">Coreografie</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/uml">Diagrammi UML</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/services">Servizi</a><button aria-label="Expand sidebar category &#x27;Servizi&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Architettura</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Architettura</h1>
<p><img decoding="async" loading="lazy" alt="Architecture scheme" src="/docs/assets/images/architecture-a24f3817c486a9461211014a082437f3.png" width="4385" height="3215" class="img_ev3q"></p>
<p>Nello schema sopra riportato, è possibile distinguere chiaramente i vari servizi terziari dai servizi offerti da ACMESky. Di seguito, analizzeremo nel dettaglio la struttura di questi servizi e illustreremo come ACMESky li utilizza.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="database">Database<a href="#database" class="hash-link" aria-label="Direct link to Database" title="Direct link to Database">​</a></h2>
<p>Usiamo solo PostgreSQL, un database NoSQL open-source. L&#x27;istanza che si vede
nello schermo è condivisa da <a href="#worker">worker</a> e <a href="#acmesky-web">backend web</a>.</p>
<p>Le tabelle presenti nel database sono le seguenti:</p>
<ul>
<li><code>available_flights</code></li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">      Column       |           Type           | Collation | Nullable |                    Default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------------+--------------------------+-----------+----------+-----------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> id                | bigint                   |           | not null | nextval(&#x27;available_flights_id_seq&#x27;::regclass)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> created_at        | timestamp with time zone |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> airline           | text                     |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> departure_time    | timestamp with time zone |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> departure_airport | text                     |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> arrival_time      | timestamp with time zone |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> arrival_airport   | text                     |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> code              | text                     |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> cost              | numeric                  |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> interest_id       | bigint                   |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> offer_sent        | boolean                  |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> user_id           | bigint                   |           |          |</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><code>interests</code></li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">         Column           |           Type           | Collation | Nullable |                Default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------------------------+--------------------------+-----------+----------+---------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">id                        | bigint                   |           | not null | nextval(&#x27;interests_id_seq&#x27;::regclass)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">created_at                | timestamp with time zone |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flight1_departure_time    | timestamp with time zone |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flight1_departure_airport | text                     |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flight1_arrival_time      | timestamp with time zone |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flight1_arrival_airport   | text                     |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flight2_departure_time    | timestamp with time zone |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flight2_departure_airport | text                     |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flight2_arrival_time      | timestamp with time zone |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flight2_arrival_airport   | text                     |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">user_id                   | bigint                   |           |          |</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><code>journeys</code></li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   Column   |           Type           | Collation | Nullable |               Default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">------------+--------------------------+-----------+----------+--------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> id         | bigint                   |           | not null | nextval(&#x27;journeys_id_seq&#x27;::regclass)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> created_at | timestamp with time zone |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> flight1_id | bigint                   |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> flight2_id | bigint                   |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> cost       | numeric                  |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> user_id    | bigint                   |           |          |</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><code>offers</code></li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    Column    |           Type           | Collation | Nullable |              Default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--------------+--------------------------+-----------+----------+------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> id           | bigint                   |           | not null | nextval(&#x27;offers_id_seq&#x27;::regclass)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> created_at   | timestamp with time zone |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> message      | text                     |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> expired      | text                     |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> token        | text                     |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> is_used      | boolean                  |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> payment_link | text                     |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> payment_paid | boolean                  |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> journey_id   | bigint                   |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> user_id      | bigint                   |           |          |</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><code>users</code></li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">       Column        |           Type           | Collation | Nullable |              Default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------------------+--------------------------+-----------+----------+-----------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> id                  | bigint                   |           | not null | nextval(&#x27;users_id_seq&#x27;::regclass)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> created_at          | timestamp with time zone |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> username            | text                     |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> password            | text                     |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> name                | text                     |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> email               | text                     |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> address             | text                     |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> prontogram_username | text                     |           |          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> is_admin            | boolean                  |           |          |</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="messages">Messages<a href="#messages" class="hash-link" aria-label="Direct link to Messages" title="Direct link to Messages">​</a></h2>
<p>Servizio di message broking che fa uso di RabbitMQ. I messaggi si trasmettano nella
rete mediante protocollo
<a href="https://en.wikipedia.org/wiki/Advanced_Message_Queuing_Protocol" target="_blank" rel="noopener noreferrer">AMQP</a>.</p>
<p>Ad utilizzare la coda <code>acme_messages</code> sono il servizio <a href="#worker">worker</a> e
<a href="#acmesky-web">backend web</a> in modalità pub/sub.</p>
<p>Il backend pubblica i messaggi nella coda e il worker li attende, così da
eseguire una task.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="worker">Worker<a href="#worker" class="hash-link" aria-label="Direct link to Worker" title="Direct link to Worker">​</a></h2>
<p>Grazie a <a href="https://camunda.io" target="_blank" rel="noopener noreferrer">Camunda</a>, il nostro servizio è in grado di integrare la business logic all&#x27;interno dei processi BPMN ed eseguire le task corrispondenti.</p>
<p>Il servizio, sviluppato in Go, si connette a un database <a href="https://postgresql.org" target="_blank" rel="noopener noreferrer">PostgreSQL</a> per salvare i dati visualizzati nelle tabelle BPMN, come <em>interessi</em>, <em>voli disponibili</em>, <em>offerte</em> e <em>viaggi</em>.
Inoltre, il servizio dipende dal message broker <a href="https://rabbitmq.com" target="_blank" rel="noopener noreferrer">RabbitMQ</a>, al quale si connette in modalità <em>subscriber</em> per ricevere messaggi nella coda <code>acme_messages</code>.
Questi messaggi vengono utilizzati per creare nuovi <code>NewPublishMessageCommand</code> nel client.</p>
<p>Nella <a href="https://github.com/acme-sky/workers/tree/main/internal/handlers" target="_blank" rel="noopener noreferrer">struttura Git</a>, ogni task è organizzata all&#x27;interno di un modulo Go per facilitare la gestione e l&#x27;ordine del codice.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">handlers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── acmesky</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── st_change_offer_status.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── st_create_journeys.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── st_get_user_interests.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── st_offer_still_valid.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── st_prepare_offer.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── st_retrieve_offer.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── st_save_flight.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── st_save_flights_as_available.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── st_save_last_minute_offer.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── tm_ack_flight_request_save.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── tm_ask_for_rent.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── tm_ask_payment_link.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── tm_book_journey.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── tm_compute_distance_user_airport.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── tm_error_on_book_journey.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── tm_error_on_check_offer.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── tm_find_nearest_available_rent_company.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── tm_journey.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── tm_journey_and_rent.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── tm_journey_rent_error.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── tm_search_flight_on_airline.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── tm_send_offer.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── tm_send_payment_link.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── prontogram</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── st_save_info_on_prontogram.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── tm_propagate_message_from_prontogram.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── user</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── tm_check_offer.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    └── tm_new_request_save_flight.go</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Nel file <code>main.go</code> del worker, è possibile vedere come ogni handler sia associato a un job che rimane in attesa di un trigger, che può provenire da Camunda o da un altro job. Nel caso di un trigger da parte di un altro job, questo avviene mediante la pubblicazione di un messaggio (publish message).</p>
<p>I messaggi utilizzati per attivare un sotto-processo non timer-catch sono i seguenti:</p>
<ul>
<li>Nuovo interesse</li>
</ul>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;name&quot;: &quot;CM_New_Request_Save_Flight&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;correlation_key&quot;: &quot;0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;payload&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;flight1_departure_airport&quot;: &quot;CPH&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;flight1_departure_time&quot;: &quot;2024-06-02T00:00:00Z&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;flight1_arrival_airport&quot;:&quot;CTA&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;flight1_arrival_time&quot;: &quot;2024-06-03T01:00:00Z&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;flight2_departure_airport&quot;: &quot;CTA&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;flight2_departure_time&quot;: &quot;2024-07-11T00:00:00Z&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;flight2_arrival_airport&quot;: &quot;CPH&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;flight2_arrival_time&quot;: &quot;2024-07-13T01:00:00Z&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;user_id&quot;: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Volo last minute</li>
</ul>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;name&quot;: &quot;CM_Received_Last_Minute_Offer&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;correlation_key&quot;: &quot;0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;payload&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;flight&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;departure_airport&quot;: &quot;CPH&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;departure_time&quot;: &quot;2024-06-10T00:00:00Z&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;arrival_airport&quot;: &quot;CTA&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;arrival_time&quot;: &quot;2024-06-13T01:00:00Z&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;airline&quot;: &quot;http://localhost:8080/v1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;cost&quot;: 123,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;code&quot;: &quot;IT1213&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Controllo di un offerta ricevuta</li>
</ul>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;name&quot;: &quot;CM_Check_Offer&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;correlation_key&quot;: &quot;0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;payload&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;token&quot;: &quot;M7QDS6&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Risposta di pagamento</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;name&quot;: &quot;CM_Payment_Response&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;correlation_key&quot;: &quot;0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;payload&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;payment_status&quot;: &quot;OK&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="acmesky-web">ACMESky Web<a href="#acmesky-web" class="hash-link" aria-label="Direct link to ACMESky Web" title="Direct link to ACMESky Web">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="backend">Backend<a href="#backend" class="hash-link" aria-label="Direct link to Backend" title="Direct link to Backend">​</a></h3>
<p>La REST API è il cuore del servizio web di ACMESky, fungendo da punto di interazione principale tra il frontend e il backend del sistema. Gli utenti finali interagiscono con il servizio esclusivamente attraverso il frontend, il quale invia richieste alla REST API per eseguire varie operazioni.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="separazione-della-business-logic">Separazione della Business Logic<a href="#separazione-della-business-logic" class="hash-link" aria-label="Direct link to Separazione della Business Logic" title="Direct link to Separazione della Business Logic">​</a></h4>
<p>È importante notare che la REST API non contiene la business logic. Questa separazione è cruciale per mantenere una struttura del codice pulita e modulare. La business logic risiede invece nei worker, che sono componenti specializzati nell&#x27;esecuzione delle operazioni richieste.
Questo approccio consente di mantenere il backend leggero e focalizzato sulla visualizzazione per gli utenti finali.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="flusso-di-lavoro">Flusso di Lavoro<a href="#flusso-di-lavoro" class="hash-link" aria-label="Direct link to Flusso di Lavoro" title="Direct link to Flusso di Lavoro">​</a></h4>
<p>Quando un utente interagisce con il frontend, ad esempio per salvare un interesse per un viaggio, il processo avviene come segue:</p>
<ol>
<li>
<p><strong>Richiesta HTTP dal Frontend</strong>: L&#x27;utente invia una richiesta HTTP al backend attraverso il frontend, specificando l&#x27;azione desiderata. Questa richiesta può includere dati aggiuntivi necessari per completare l&#x27;azione, come i dettagli dell&#x27;interesse per il viaggio.</p>
</li>
<li>
<p><strong>Inserimento nel Messaggio</strong>: Il backend riceve la richiesta e incapsula i dati del payload in un messaggio. Questo messaggio viene poi trasmesso al message broker <a href="https://rabbitmq.com" target="_blank" rel="noopener noreferrer">RabbitMQ</a>.</p>
</li>
<li>
<p><strong>Elaborazione del Worker</strong>: Il worker, in ascolto sui messaggi in arrivo su RabbitMQ, riceve il messaggio e avvia l&#x27;elaborazione. È il worker a contenere ed eseguire la business logic necessaria per completare l&#x27;azione richiesta, come il salvataggio dell&#x27;interesse nel database.</p>
</li>
<li>
<p><strong>Aggiornamento del Database</strong>: Poiché il database <a href="https://postgresql.org" target="_blank" rel="noopener noreferrer">PostgreSQL</a> è condiviso tra il backend e i worker, il worker salva i dati nel database una volta completata l&#x27;elaborazione.</p>
</li>
<li>
<p><strong>Richieste GET</strong>: Quando l&#x27;utente invia una richiesta GET per recuperare informazioni, come la lista degli interessi, il backend interroga il database condiviso e restituisce i dati richiesti al frontend.</p>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="vantaggi-dellarchitettura">Vantaggi dell&#x27;Architettura<a href="#vantaggi-dellarchitettura" class="hash-link" aria-label="Direct link to Vantaggi dell&#x27;Architettura" title="Direct link to Vantaggi dell&#x27;Architettura">​</a></h4>
<p>Questo modello architetturale offre diversi vantaggi:</p>
<ul>
<li><strong>Scalabilità</strong>: La separazione della business logic nei worker permette di scalare orizzontalmente il sistema, aggiungendo più worker secondo necessità senza influenzare il backend.</li>
<li><strong>Manutenzione</strong>: La manutenzione del codice è semplificata, poiché la business logic è isolata nei worker e non mischiata con la logica di gestione delle richieste HTTP.</li>
<li><strong>Affidabilità</strong>: Utilizzando RabbitMQ come message broker, garantiamo che le richieste siano processate in modo affidabile e che eventuali guasti possano essere gestiti senza perdita di dati.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="frontend">Frontend<a href="#frontend" class="hash-link" aria-label="Direct link to Frontend" title="Direct link to Frontend">​</a></h3>
<p>Il frontend di ACMESky rappresenta la vetrina attraverso la quale l&#x27;utente finale interagisce con il servizio. Sviluppato utilizzando <a href="https://nextjs.org" target="_blank" rel="noopener noreferrer">Next.js</a>, un framework React per lo sviluppo di applicazioni web, il frontend fornisce un&#x27;interfaccia utente intuitiva e reattiva.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="interazione-con-il-backend">Interazione con il Backend<a href="#interazione-con-il-backend" class="hash-link" aria-label="Direct link to Interazione con il Backend" title="Direct link to Interazione con il Backend">​</a></h4>
<p>Il frontend si interfaccia esclusivamente con il <a href="#acmesky-web">backend web</a> attraverso chiamate HTTP. Questo design permette una chiara separazione delle responsabilità tra il frontend e il backend, migliorando la manutenibilità e la scalabilità dell&#x27;intero sistema. Ogni azione dell&#x27;utente, come la ricerca di voli, la visualizzazione delle offerte o la gestione degli interessi di viaggio, viene tradotta in una richiesta HTTP al backend, che gestisce la logica applicativa e l&#x27;accesso ai dati.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sistema-di-autenticazione">Sistema di Autenticazione<a href="#sistema-di-autenticazione" class="hash-link" aria-label="Direct link to Sistema di Autenticazione" title="Direct link to Sistema di Autenticazione">​</a></h4>
<p>La sicurezza e l&#x27;autenticazione sono gestite mediante JSON Web Tokens (<a href="https://jwt.io" target="_blank" rel="noopener noreferrer">JWT</a>). Quando un utente si autentica, il backend genera un token JWT, che viene poi utilizzato per autenticare le successive richieste dell&#x27;utente. Il token JWT è incluso nell&#x27;header <code>Authorization</code> delle richieste HTTP, garantendo che solo gli utenti autenticati possano accedere a determinate risorse e funzionalità del servizio.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="vantaggi-dellarchitettura-1">Vantaggi dell&#x27;Architettura<a href="#vantaggi-dellarchitettura-1" class="hash-link" aria-label="Direct link to Vantaggi dell&#x27;Architettura" title="Direct link to Vantaggi dell&#x27;Architettura">​</a></h4>
<p>L&#x27;utilizzo di Next.js per il frontend e JWT per l&#x27;autenticazione offre numerosi vantaggi:</p>
<ul>
<li><strong>Performance</strong>: Next.js permette il rendering lato server e la generazione statica, migliorando le performance e l&#x27;ottimizzazione per i motori di ricerca (SEO).</li>
<li><strong>Sicurezza</strong>: L&#x27;uso di JWT garantisce un sistema di autenticazione sicuro e scalabile, con la possibilità di gestire facilmente sessioni utente e permessi.</li>
<li><strong>Manutenibilità</strong>: La separazione tra frontend e backend facilita lo sviluppo indipendente delle due componenti, permettendo aggiornamenti e miglioramenti senza interferenze reciproche.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="servizi-esterni">Servizi esterni<a href="#servizi-esterni" class="hash-link" aria-label="Direct link to Servizi esterni" title="Direct link to Servizi esterni">​</a></h2>
<p>Essi sono servizi usati dal <a href="#worker">worker</a> e sono meglio descritti nel loro
dettaglio in <a href="/docs/services">qui</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="geodistance">Geodistance<a href="#geodistance" class="hash-link" aria-label="Direct link to Geodistance" title="Direct link to Geodistance">​</a></h3>
<p>Il servizio Geodistance è progettato per calcolare le distanze tra due indirizzi utilizzando le coordinate geografiche. Questo servizio è scritto in Go e sfrutta l&#x27;API di Google Maps per fornire risultati precisi ed efficienti.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="comunicazione-tramite-grpc">Comunicazione tramite gRPC<a href="#comunicazione-tramite-grpc" class="hash-link" aria-label="Direct link to Comunicazione tramite gRPC" title="Direct link to Comunicazione tramite gRPC">​</a></h4>
<p>La comunicazione tra il worker e il servizio Geodistance avviene tramite <a href="https://grpc.io" target="_blank" rel="noopener noreferrer">gRPC</a>, un framework di chiamata di procedure remote (RPC) ad alte prestazioni sviluppato da Google. gRPC permette la trasmissione di dati in modo veloce e sicuro, garantendo un&#x27;interazione fluida e affidabile tra i vari componenti del sistema.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="calcolo-della-distanza">Calcolo della distanza<a href="#calcolo-della-distanza" class="hash-link" aria-label="Direct link to Calcolo della distanza" title="Direct link to Calcolo della distanza">​</a></h4>
<p>Il servizio Geodistance utilizza le API di Google Maps per calcolare la distanza in metri tra due indirizzi. Gli indirizzi vengono specificati utilizzando le coordinate di latitudine e longitudine.
Quest&#x27;ultime forniscono una rappresentazione precisa della posizione, riducendo al minimo gli errori nei calcoli della distanza.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="conversione-degli-indirizzi">Conversione degli indirizzi<a href="#conversione-degli-indirizzi" class="hash-link" aria-label="Direct link to Conversione degli indirizzi" title="Direct link to Conversione degli indirizzi">​</a></h4>
<p>Per facilitare l&#x27;uso del servizio da parte degli utenti, Geodistance include anche la funzionalità di conversione degli indirizzi. Gli utenti possono inserire gli indirizzi in formato stringa
(ad esempio, &quot;Mura Anteo Zamboni 7, Bologna&quot;), e il servizio utilizza le API di Google Maps per convertire questi indirizzi nelle corrispondenti coordinate di latitudine e longitudine.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="airline">Airline<a href="#airline" class="hash-link" aria-label="Direct link to Airline" title="Direct link to Airline">​</a></h3>
<p>È progettato per simulare l&#x27;API di una compagnia aerea. Scritto in Go e utilizzando il framework Gin, Airline offre una REST API attraverso la quale il <a href="#worker">worker</a> può effettuare richieste HTTP per cercare i voli di interesse per un utente.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ricerca-dei-voli">Ricerca dei voli<a href="#ricerca-dei-voli" class="hash-link" aria-label="Direct link to Ricerca dei voli" title="Direct link to Ricerca dei voli">​</a></h4>
<p>Allo scoccare del timer-event il worker di ACMESky invia una richiesta HTTP alla REST API del servizio Airline per la ricerca dei voli d&#x27;interesse.
Questa richiesta include i dettagli necessari, come gli aereiporti di destinazione/arrivo e le date di viaggio.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="scalabilità">Scalabilità<a href="#scalabilità" class="hash-link" aria-label="Direct link to Scalabilità" title="Direct link to Scalabilità">​</a></h4>
<p>Un aspetto chiave del servizio Airline è la sua capacità di essere scalabile e di simulare più compagnie aeree.
Questo è ottenuto attraverso la possibilità di creare più istanze del servizio, ciascuna con il proprio database separato.
Ogni istanza rappresenta una compagnia aerea distinta, consentendo di simulare un ambiente realistico con diverse opzioni di voli: questo simula un servizio reale che va alla ricerca di più fonti per i propri utenti.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="bank">Bank<a href="#bank" class="hash-link" aria-label="Direct link to Bank" title="Direct link to Bank">​</a></h3>
<p>Questo servizio è composto da due parti principali: un backend scritto in OCaml e un frontend sviluppato in Vue.js.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="backend-in-ocaml">Backend in OCaml<a href="#backend-in-ocaml" class="hash-link" aria-label="Direct link to Backend in OCaml" title="Direct link to Backend in OCaml">​</a></h4>
<p>Il backend del servizio di pagamento è scritto in OCaml, un linguaggio di programmazione funzionale. Questo backend espone una REST API che permette al <a href="#worker">worker</a> di interfacciarsi con esso per eseguire varie operazioni di pagamento.</p>
<p>Quando un utente avvia una transazione di pagamento, il worker comunica con il backend attraverso chiamate REST. Queste chiamate includono le informazioni necessarie per processare il pagamento, come l&#x27;importo e le credenziali di pagamento dell&#x27;utente.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="frontend-in-vuejs">Frontend in Vue.js<a href="#frontend-in-vuejs" class="hash-link" aria-label="Direct link to Frontend in Vue.js" title="Direct link to Frontend in Vue.js">​</a></h4>
<p>Il frontend del servizio di pagamento è sviluppato in Vue.js, un framework JavaScript noto per la sua facilità d&#x27;uso e capacità di creare interfacce utente reattive e dinamiche.</p>
<ol>
<li><strong>UI</strong>: Gli utenti utilizzano il frontend per inserire le proprie credenziali di pagamento. Anche se le credenziali sono fittizie per scopi di simulazione, il processo è progettato per essere il più realistico possibile.</li>
<li><strong>UX</strong>: L&#x27;interfaccia utente è intuitiva e guida l&#x27;utente attraverso i passaggi necessari per completare la transazione. Una volta che l&#x27;utente ha inserito le informazioni richieste, il frontend invia questi dati al backend tramite una richiesta HTTP.</li>
</ol>
<p>Una volta completato il processo, l&#x27;utente viene reindirizzato a un link di callback che conferma o nega il pagamento. Questo link può visualizzare un messaggio di successo o di errore, informando l&#x27;utente dell&#x27;esito della transazione.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="prontogram">Prontogram<a href="#prontogram" class="hash-link" aria-label="Direct link to Prontogram" title="Direct link to Prontogram">​</a></h3>
<p>Il servizio di messaggistica Prontogram è progettata per consentire la comunicazione tra il sistema e gli utenti finali durante la fase di generazione di offerte. È diviso in due parti principali: un backend scritto in <a href="https://jolie-lang.org/" target="_blank" rel="noopener noreferrer">Jolie</a> e un frontend sviluppato in <a href="https://react.dev" target="_blank" rel="noopener noreferrer">React</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="backend-in-jolie">Backend in Jolie<a href="#backend-in-jolie" class="hash-link" aria-label="Direct link to Backend in Jolie" title="Direct link to Backend in Jolie">​</a></h4>
<p>Il backend del servizio Prontogram è sviluppato utilizzando Jolie, un linguaggio di programmazione progettato specificamente per la costruzione di microservizi e per il <a href="https://en.wikipedia.org/wiki/Choreographic_programming" target="_blank" rel="noopener noreferrer">paradigma di programmazione orientato alle coreografie</a>. Jolie facilita la creazione di servizi distribuiti, garantendo un&#x27;architettura modulare e scalabile.</p>
<ol>
<li><strong>Interazione del worker</strong>: Il <a href="#worker">worker</a> di ACMESky comunica con il backend di Prontogram attraverso una REST API. Quando il worker deve inviare un messaggio a un utente, effettua una richiesta HTTP all&#x27;endpoint appropriato del backend.</li>
<li><strong>Creazione di messaggi</strong>: L&#x27;endpoint del backend di Prontogram è responsabile della creazione di nuovi messaggi. Per poter inviare un messaggio, l&#x27;utente destinatario deve avere specificato il campo <code>prontogram_username</code> nel suo profilo ACMESky. Questo campo identifica univocamente l&#x27;utente all&#x27;interno del sistema Prontogram.</li>
<li><strong>Gestione dei messaggi</strong>: Una volta ricevuta la richiesta dal worker, il backend di Prontogram elabora i dati e crea un nuovo messaggio per l&#x27;utente selezionato, salvandolo nel database del servizio.</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="frontend-in-react">Frontend in React<a href="#frontend-in-react" class="hash-link" aria-label="Direct link to Frontend in React" title="Direct link to Frontend in React">​</a></h4>
<p>Il frontend del servizio Prontogram è sviluppato in React, una libreria JavaScript popolare per la costruzione di interfacce utente. React permette di creare componenti riutilizzabili e di mantenere un&#x27;interfaccia utente reattiva e dinamica.</p>
<ol>
<li><strong>Accesso dell&#x27;utente</strong>: Gli utenti finali possono accedere al frontend di Prontogram per visualizzare i messaggi che gli sono stati inviati da ACMESky. L&#x27;interfaccia utente è progettata per essere intuitiva e facile da usare, consentendo agli utenti di leggere i loro messaggi in modo semplice.</li>
<li><strong>Visualizzazione dei messaggi</strong>: Il frontend offre una visualizzazione in sola lettura dei messaggi. Gli utenti possono vedere i messaggi ricevuti, ma non possono modificarli o rispondere tramite questa interfaccia. Questo garantisce che le comunicazioni importanti inviate da ACMESky rimangano intatte e non alterate.</li>
<li><strong>UX</strong>: React garantisce un&#x27;esperienza utente fluida, con aggiornamenti in tempo reale e un&#x27;interfaccia reattiva. Gli utenti possono navigare attraverso i messaggi e visualizzare le informazioni pertinenti senza ritardi o interruzioni.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="rent">Rent<a href="#rent" class="hash-link" aria-label="Direct link to Rent" title="Direct link to Rent">​</a></h3>
<p>Servizio progettato per fornire un&#x27;esperienza di transfer simile a quella offerta da aziende come <a href="https://uber.com" target="_blank" rel="noopener noreferrer">Uber</a> o <a href="https://bolt.eu" target="_blank" rel="noopener noreferrer">Bolt</a>. Scritto in <a href="https://jolie-lang.org" target="_blank" rel="noopener noreferrer">Jolie</a>, questo servizio viene utilizzato per gestire le prenotazioni di transfer degli utenti dal loro indirizzo di casa all&#x27;aeroporto di partenza del viaggio, sotto determinate condizioni.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="funzionalità-del-servizio">Funzionalità del servizio<a href="#funzionalità-del-servizio" class="hash-link" aria-label="Direct link to Funzionalità del servizio" title="Direct link to Funzionalità del servizio">​</a></h4>
<p>Il servizio viene attivato nelle seguenti circostanze:</p>
<ul>
<li><strong>Prenotazioni di transfer</strong>: Il servizio viene utilizzato quando il prezzo del viaggio supera i 1000€. In queste condizioni, ACMESky offre un servizio di transfer gratuito all&#x27;utente.</li>
<li><strong>Simulazione di agenzie reali</strong>: Il servizio è progettato per simulare scenari realistici, permettendo la creazione di più istanze per rappresentare diverse agenzie di transfer. Ogni istanza funziona in modo indipendente e può essere contattata dal worker per trovare la soluzione di transfer più vicina e conveniente per l&#x27;utente.</li>
</ul>
<p>Il <a href="#worker">worker</a> di ACMESky è responsabile di interagire con il servizio di transfer tramite un&#x27;API SOAP. Questo protocollo di comunicazione garantisce una trasmissione dati sicura e affidabile tra il worker e il servizio.</p>
<p>Per determinare la vicinanza delle agenzie di transfer all&#x27;indirizzo dell&#x27;utente, il servizio utilizza il servizio <a href="#geodistance">Geodistance</a>. Questo consente di calcolare la distanza tra l&#x27;indirizzo dell&#x27;utente e le diverse agenzie di transfer, trovando la soluzione ottimale.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Home</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/bpmn"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Diagramma BPMN</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#database" class="table-of-contents__link toc-highlight">Database</a></li><li><a href="#messages" class="table-of-contents__link toc-highlight">Messages</a></li><li><a href="#worker" class="table-of-contents__link toc-highlight">Worker</a></li><li><a href="#acmesky-web" class="table-of-contents__link toc-highlight">ACMESky Web</a><ul><li><a href="#backend" class="table-of-contents__link toc-highlight">Backend</a></li><li><a href="#frontend" class="table-of-contents__link toc-highlight">Frontend</a></li></ul></li><li><a href="#servizi-esterni" class="table-of-contents__link toc-highlight">Servizi esterni</a><ul><li><a href="#geodistance" class="table-of-contents__link toc-highlight">Geodistance</a></li><li><a href="#airline" class="table-of-contents__link toc-highlight">Airline</a></li><li><a href="#bank" class="table-of-contents__link toc-highlight">Bank</a></li><li><a href="#prontogram" class="table-of-contents__link toc-highlight">Prontogram</a></li><li><a href="#rent" class="table-of-contents__link toc-highlight">Rent</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Built with Docusaurus</div></div></div></footer></div>
</body>
</html>