"use strict";(self.webpackChunkacme_sky_docs=self.webpackChunkacme_sky_docs||[]).push([[478],{7456:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>t,metadata:()=>a,toc:()=>d});var r=s(4848),i=s(8453);const t={sidebar_position:4,slug:"/services/rent"},o="Rent",a={id:"services/rent",title:"Rent",description:"Al contrario di quello che potrebbe sembrare, questo servizio fa riferimento ad",source:"@site/docs/services/rent.md",sourceDirName:"services",slug:"/services/rent",permalink:"/docs/services/rent",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4,slug:"/services/rent"},sidebar:"defaultSidebar",previous:{title:"Bank",permalink:"/docs/services/bank"},next:{title:"Geodistance",permalink:"/docs/services/geodistance"}},c={},d=[{value:"Set up",id:"set-up",level:2},{value:"API",id:"api",level:2},{value:"Codice sorgente",id:"codice-sorgente",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"rent",children:"Rent"}),"\n",(0,r.jsx)(n.p,{children:"Al contrario di quello che potrebbe sembrare, questo servizio fa riferimento ad\nun servizio di taxi, o meglio, di car sharing."}),"\n",(0,r.jsx)(n.p,{children:"\xc8 usato da ACMESky, in caso di viaggi con costo superiore ai 1000\u20ac, per\nprenotare un transfer per l'utente da casa all'areoporto."}),"\n",(0,r.jsx)(n.h2,{id:"set-up",children:"Set up"}),"\n",(0,r.jsxs)(n.p,{children:["Rent \xe8 un'API SOAP scritta in ",(0,r.jsx)(n.a,{href:"https://www.jolie-lang.org",children:"Jolie"}),". Per avviare\nil server bisogna prima generare yn servizi per un dato ",(0,r.jsx)(n.code,{children:"namespace"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"jolie2wsdl --namespace <namespace> --portName RentPort --portAddr <portaddr> --outputFile <file.wsdl> server.ol\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Ad esempio, per un possibile ",(0,r.jsx)(n.code,{children:"uber.acmesky.cs.unibo.it"})," simile al noto servizio\n",(0,r.jsx)(n.a,{href:"https://www.uber.com/it/it/",children:"Uber"})," che gira nella porta locale ",(0,r.jsx)(n.code,{children:"8080"})," avremmo:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"jolie2wsdl --namespace uber.acmesky.cs.unibo.it --portName RentPort --portAddr http://localhost:8080 --outputFile uber-acmesky.wsdl server.ol\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Successivamente baster\xe0 creare un file di configurazione ",(0,r.jsx)(n.code,{children:"config.json"}),"\nspecificando:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "location": "socket://localhost:8080",\n    "proto": {\n        "$": "soap",\n        "wsdl": "./uber-acmesky.wsdl"\n    },\n    "database": {\n        "username": "username",\n        "password": "password",\n        "host": "localhost",\n        "name": "rent"\n    }\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Dal file di configurazione di Docker compose si vede come la cartella corrente\nvenga mappata automaticamente nel volume in ",(0,r.jsx)(n.code,{children:"/etc/data"}),". Dunque, il WSDL, in\nproduzione, sarebbe qualcosa del tipo ",(0,r.jsx)(n.code,{children:"/etc/data/uber-acmesky.wsdl"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"api",children:"API"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Rent input port",src:s(6446).A+"",width:"643",height:"530"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["La richiesta \xe8 del tipo ",(0,r.jsx)(n.code,{children:"RentRequest"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"type RentRequest: void {\n     .CustomerSurname[1,1]: string\n     .PickupAddress[1,1]: string\n     .Address[1,1]: string\n     .CustomerName[1,1]: string\n     .PickupDate[1,1]: string\n}\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["La risposta \xe8 del tipo ",(0,r.jsx)(n.code,{children:"RentResponse"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"type RentResponse: void {\n     .Status[1,1]: string\n     .RentId[0,1]: string\n     .Error[0,1]: string\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"Un test pu\xf2 essere fatto dal seguente payload:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:rent="uber.acmesky.cs.unibo.it.xsd">\n   <soapenv:Header/>\n   <soapenv:Body>\n      <rent:BookRent>\n         <CustomerName>Mario</CustomerName>\n         <CustomerSurname>Rossi</CustomerSurname>\n         <PickupAddress>Via Zamboni 33, Bologna</PickupAddress>\n         <Address>Mura Anteo Zamboni 7, Bologna</Address>\n         <PickupDate>2024-03-02T13:10:00Z</PickupDate>\n      </rent:BookRent>\n   </soapenv:Body>\n</soapenv:Envelope>\n'})}),"\n",(0,r.jsx)(n.h2,{id:"codice-sorgente",children:"Codice sorgente"}),"\n",(0,r.jsxs)(n.p,{children:["Il server \xe8 presente alla seguente ",(0,r.jsx)(n.a,{href:"https://github.com/acme-sky/rentservice-api",children:"repository Github"}),"."]})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},6446:(e,n,s)=>{s.d(n,{A:()=>r});const r=s.p+"assets/images/rent-inputport-b740dae2053c724bc2a15e3e9b1bd546.png"},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>a});var r=s(6540);const i={},t=r.createContext(i);function o(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);